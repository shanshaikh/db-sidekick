<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sidekick ‚Äî Ask Your Database in Slack</title>
  <style>
    :root {
      --bg: #0b0e14;
      --card: #121826;
      --text: #e6e8ee;
      --muted: #9aa4bf;
      --accent: #6cf2c2;
      --accent-2: #5aa9ff;
      --danger: #ff6b6b;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: radial-gradient(circle at top, #121826, #0b0e14);
      color: var(--text);
      line-height: 1.6;
    }
    header { padding: 5rem 1.5rem; text-align: center; max-width: 900px; margin: 0 auto; }
    header h1 { font-size: 3rem; margin-bottom: 0.5rem; }
    header .product-name { font-size: 0.9rem; letter-spacing: 0.12em; text-transform: uppercase; color: var(--accent); margin-bottom: 0.75rem; }
    header p { font-size: 1.2rem; color: var(--muted); margin-bottom: 2rem; }
    .cta { display: inline-block; background: linear-gradient(135deg, var(--accent), var(--accent-2)); color: #000; padding: 0.9rem 1.5rem; border-radius: 8px; font-weight: 600; margin: 0.5rem; text-decoration: none; }
    .cta.secondary { background: transparent; color: var(--text); border: 1px solid var(--muted); }
    section { max-width: 1100px; margin: 0 auto; padding: 4rem 1.5rem; }
    section h2 { font-size: 2rem; margin-bottom: 1rem; text-align: center; }
    section p.subtitle { text-align: center; color: var(--muted); margin-bottom: 3rem; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1.5rem; }
    .card { background: var(--card); border: 1px solid #1c2333; border-radius: 12px; padding: 1.5rem; }
    .pricing { border: 1px solid #1c2333; border-radius: 16px; padding: 2rem; background: linear-gradient(180deg, #121826, #0b0e14); }
    .highlight { border: 2px solid var(--accent); }
    footer { text-align: center; padding: 3rem 1.5rem; color: var(--muted); border-top: 1px solid #1c2333; }
    .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.6); display: none; align-items: center; justify-content: center; padding: 1rem; }
    .modal-content { background: var(--card); padding: 2rem; border-radius: 12px; max-width: 400px; width: 100%; }
    .modal-content input, .modal-content select, .modal-content textarea { width: 100%; padding: 0.7rem; margin: 0.5rem 0; border-radius: 6px; border: 1px solid #2a3350; background: #0b0e14; color: var(--text); }
    .modal-content input:disabled, .modal-content select:disabled, .modal-content textarea:disabled, .modal-content button:disabled { opacity: 0.5; cursor: not-allowed; }
    .close { float: right; cursor: pointer; color: var(--muted); }
    .form-disabled { opacity: 0.5; pointer-events: none; }
    .cta.disabled { opacity: 0.5; cursor: not-allowed; }
  </style>
</head>
<body>

<header>
  <h1>Ask your database questions directly in Slack ‚Äî safely and read-only.</h1>
  <p>Get instant answers from Postgres using natural language. No dashboards. No SQL. No risky access.</p>
  <a href="#" class="cta" id="requestAccessBtn" onclick="openModal()">Request Founding Access</a>
  <p style="margin-top:1rem;font-size:0.9rem;color:var(--accent);" id="signupStatus">üß™ Founding Beta ¬∑ Limited to 30 teams ¬∑ $29/month locked in</p>
</header>

<section>
  <h2>The solution</h2>
  <p class="subtitle">A read-only assistant that answers questions from your production database ‚Äî inside Slack</p>
  <div class="grid">
    <div class="card"><h3>Ask in Slack</h3><p>‚ÄúHow many devices are in production right now?‚Äù</p></div>
    <div class="card"><h3>Protected access</h3><p>Strict read-only enforcement ‚Äî answers only, never changes.</p></div>
    <div class="card"><h3>Instant results</h3><p>Clear answers returned in seconds, not SQL queries.</p></div>
  </div>
</section>

<section>
    <h2>What it looks like</h2>
    <p class="subtitle">Ask a question in Slack ‚Äî Sidekick returns a safe, read-only result</p>
  
    <div style="max-width:820px;margin:0 auto;">
  
      <!-- User message -->
      <div class="card" style="margin-bottom:1rem;">
        <p style="margin-bottom:0.25rem;">
          <strong style="color:var(--accent);">You</strong>
          <span style="color:var(--muted);"> 10:42 AM</span>
        </p>
        <p>
            <strong style="color:var(--accent-2);">/sidekick</strong> Show me all the customers that have bought something and the most expensive product each one has bought,
          and order them from most expensive to least
        </p>
      </div>
  
      <!-- Sidekick response -->
      <div class="card" style="margin-bottom:1.25rem;">
        <p style="margin-bottom:0.5rem;">
          <strong style="color:var(--accent-2);">Sidekick</strong>
          <span style="color:var(--muted);"> 10:42 AM</span>
        </p>
  
        <p style="margin-bottom:0.75rem;">‚úÖ <strong>Query Results (7 rows)</strong></p>
  
        <pre style="
  background:#0b0e14;
  border:1px solid #1c2333;
  border-radius:8px;
  padding:1rem;
  overflow-x:auto;
  font-size:0.85rem;
  color:var(--text);
  ">
  customer_id | first_name | last_name | email                  | phone    | status | total_spent | loyalty_points | product_id | product_name            | most_expensive_product_price
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------
  5           | Eve        | Davis     | eve.davis@email.com    | 555-0105 | active | 3200.00     | 320            | 6          | DSLR Camera             | 1599.99
  1           | Alice      | Smith     | alice.smith@email.com  | 555-0101 | active | 1250.50     | 125            | 1          | Gaming Laptop Pro       | 1299.99
  2           | Bob        | Jones     | bob.jones@email.com    | 555-0102 | active | 890.25      | 89             | 2          | SmartPhone X            | 899.99
  7           | Grace      | Wilson    | grace.wilson@email.com | 555-0107 | active | 1890.25     | 189            | 7          | Wide Angle Lens         | 599.99
  3           | Carol      | White     | carol.white@email.com  | 555-0103 | active | 2100.75     | 210            | 3          | Tablet Plus             | 499.99
  1           | Alice      | Smith     | alice.smith@email.com  | 555-0101 | active | 1250.50     | 125            | 4          | Wireless Headphones     | 199.99
  2           | Bob        | Jones     | bob.jones@email.com    | 555-0102 | active | 890.25      | 89             | 5          | Bluetooth Speaker       | 79.99
  </pre>
  
        <p style="font-size:0.85rem;color:var(--muted);margin-top:0.5rem;">
          Execution time: <strong>0.02s</strong> ¬∑ Read-only query
        </p>
      </div>
  
      <!-- Follow-up user message -->
      <div class="card" style="margin-bottom:1rem;">
        <p style="margin-bottom:0.25rem;">
          <strong style="color:var(--accent);">You</strong>
          <span style="color:var(--muted);"> 10:43 AM</span>
        </p>
        <p>
            <strong style="color:var(--accent-2);">/sidekick</strong> Only show active customers from the last 30 days
        </p>
      </div>
  
      <!-- Follow-up Sidekick response -->
      <div class="card">
        <p style="margin-bottom:0.5rem;">
          <strong style="color:var(--accent-2);">Sidekick</strong>
          <span style="color:var(--muted);"> 10:43 AM</span>
        </p>
  
        <p style="margin-bottom:0.75rem;">‚úÖ <strong>Query Results (4 rows)</strong></p>
  
        <pre style="
  background:#0b0e14;
  border:1px solid #1c2333;
  border-radius:8px;
  padding:1rem;
  overflow-x:auto;
  font-size:0.85rem;
  color:var(--text);
  ">
  customer_id | first_name | last_name | email                  | status | product_name      | most_expensive_product_price | last_purchase_date
  ----------------------------------------------------------------------------------------------------------------------------------
  5           | Eve        | Davis     | eve.davis@email.com    | active | DSLR Camera       | 1599.99                     | 2025-09-28
  1           | Alice      | Smith     | alice.smith@email.com  | active | Gaming Laptop Pro | 1299.99                     | 2025-09-25
  7           | Grace      | Wilson    | grace.wilson@email.com | active | Wide Angle Lens   | 599.99                      | 2025-09-21
  3           | Carol      | White     | carol.white@email.com  | active | Tablet Plus       | 499.99                      | 2025-09-19
  </pre>
  
        <p style="font-size:0.85rem;color:var(--muted);margin-top:0.5rem;">
          Filtered previous result ¬∑ Active customers ¬∑ Last 30 days ¬∑ Read-only
        </p>
      </div>
  
    </div>
</section>

<section>
  <h2>Why this is worth it</h2>
  <p class="subtitle">This replaces far more expensive habits teams already accept</p>
  <div class="grid">
    <div class="card"><p>Interrupting engineers for simple questions</p></div>
    <div class="card"><p>Granting risky production database access</p></div>
    <div class="card"><p>Writing and double-checking ad-hoc SQL</p></div>
    <div class="card"><p>Context switching just to get an answer</p></div>
    <div class="card"><p>Waiting hours or days for basic data</p></div>
  </div>
  <p style="text-align:center;color:var(--muted);margin-top:2rem;max-width:700px;margin-left:auto;margin-right:auto;">
    For most teams, avoiding <strong>one engineer interruption per week</strong> already justifies adopting a tool like this. 
    Preventing <strong>one production mistake</strong> makes the cost trivial.
  </p>
</section>

<section id="pricing">
  <h2>Founding Beta Pricing</h2>
  <p class="subtitle">Per Slack workspace ¬∑ Cancel anytime</p>
  <div style="display:flex;justify-content:center;">
    <div class="pricing highlight" style="max-width:420px;width:100%;">
      <h3>Founding Beta</h3>
      <p style="font-size:2.5rem;margin:1rem 0;">$29<span style="font-size:1rem">/mo</span></p>
      <ul>
        <li>1 database connection</li>
        <li>Unlimited users</li>
        <li><strong>750 queries/month</strong></li>
        <li>Strict read-only access</li>
        <li>Basic audit logs</li>
        <li>Founders pricing ‚Äî never increases</li>
      </ul>
      <a href="#" class="cta" id="requestAccessBtn2" onclick="openModal()">Request Founding Access</a>
    </div>
  </div>
</section>

<footer>
  <p>Slack-first ¬∑ Read-only ¬∑ Built for production databases</p>
</footer>

<div class="modal" id="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">‚úï</span>
      <h3>Request Founding Access</h3>
      <p style="font-size:0.85rem;color:var(--muted);margin-bottom:0.5rem;"><em>Coming soon ‚Äî the beta version isn't live yet.</em></p>
      <p style="font-size:0.9rem;color:var(--muted);margin-bottom:1rem;" id="modalSignupStatus">Limited to 30 teams ¬∑ $29/month locked in</p>
      <div id="fullMessage" style="display:none;padding:1rem;background:#1c2333;border:1px solid var(--danger);border-radius:8px;margin-bottom:1rem;color:var(--danger);">
        <strong>We're Full!</strong><br>
        <span style="font-size:0.9rem;">We've reached our limit of 30 founding beta signups. Thanks for your interest!</span>
      </div>
      <form id="signupForm" onsubmit="submitForm(event)">
        <input type="email" id="email" placeholder="Work email *" required />
        <input type="text" id="company" placeholder="Company name *" required />
  
        <select id="role" required>
          <option value="">Your role *</option>
          <option>Engineer</option>
          <option>Product Manager</option>
          <option>Engineering Manager</option>
          <option>CTO</option>
          <option>Other</option>
        </select>
  
        <select id="teamSize" required>
          <option value="">Team size *</option>
          <option>1-5</option>
          <option>6-10</option>
          <option>11-25</option>
          <option>26-50</option>
          <option>50+</option>
        </select>
  
        <select id="dbType" required>
          <option value="">Database type *</option>
          <option>PostgreSQL</option>
          <option>MySQL</option>
          <option>Other</option>
        </select>
  
        <select id="slackSize">
          <option value="">Slack workspace size (optional)</option>
          <option>1-20</option>
          <option>21-100</option>
          <option>101-500</option>
          <option>500+</option>
        </select>
  
        <select id="pricingFeedback">
          <option value="">How does $29/month feel? (optional)</option>
          <option value="cheap">Very reasonable</option>
          <option value="fair">Fair for the value</option>
          <option value="high">A bit high</option>
          <option value="too_high">Too expensive</option>
        </select>
  
        <textarea id="notes" placeholder="Anything else you want to tell us? (optional)" rows="3"></textarea>
  
        <button type="submit" class="cta" style="width:100%;margin-top:1rem;border:none;cursor:pointer;">Submit Request</button>
      </form>
      <div id="formMessage" style="margin-top: 1rem; display:none;"></div>
    </div>
</div>  

<script>
let signupStatus = { currentCount: 0, maxSignups: 30, isFull: false };

// Check signup status on page load
async function checkSignupStatus() {
  try {
    const res = await fetch('/api/early-access-status');
    if (res.ok) {
      signupStatus = await res.json();
      updateUI();
    }
  } catch (err) {
    console.error('Error checking signup status:', err);
  }
}

function updateUI() {
  const { currentCount, maxSignups, isFull, spotsRemaining } = signupStatus;
  
  // Update status text
  const statusText = isFull 
    ? `üß™ Founding Beta ¬∑ Full (${currentCount}/${maxSignups} signups)` 
    : `üß™ Founding Beta ¬∑ ${spotsRemaining} spots remaining ¬∑ $29/month locked in`;
  
  document.getElementById('signupStatus').textContent = statusText;
  document.getElementById('modalSignupStatus').textContent = statusText;
  
  // Disable buttons and form if full
  const requestBtns = document.querySelectorAll('#requestAccessBtn, #requestAccessBtn2');
  const form = document.getElementById('signupForm');
  const fullMessage = document.getElementById('fullMessage');
  
  if (isFull) {
    requestBtns.forEach(btn => {
      btn.classList.add('disabled');
      btn.style.pointerEvents = 'none';
      btn.textContent = 'Founding Beta Full';
    });
    form.classList.add('form-disabled');
    fullMessage.style.display = 'block';
    form.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
  } else {
    requestBtns.forEach(btn => {
      btn.classList.remove('disabled');
      btn.style.pointerEvents = 'auto';
      btn.textContent = 'Request Founding Access';
    });
    form.classList.remove('form-disabled');
    fullMessage.style.display = 'none';
    form.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = false);
  }
}

// Check email uniqueness
async function checkEmailUniqueness(email) {
  if (!email) return null;
  try {
    const res = await fetch(`/api/early-access-status?email=${encodeURIComponent(email)}`);
    if (res.ok) {
      const data = await res.json();
      return data.emailExists;
    }
  } catch (err) {
    console.error('Error checking email:', err);
  }
  return null;
}

function openModal() { 
  // Refresh status when opening modal
  checkSignupStatus().then(() => {
    document.getElementById('modal').style.display = 'flex';
  });
}

function closeModal() { 
  document.getElementById('modal').style.display = 'none'; 
  document.getElementById('signupForm').reset();
  document.getElementById('formMessage').style.display = 'none';
}

// Check email on blur
document.addEventListener('DOMContentLoaded', function() {
  checkSignupStatus();
  
  const emailInput = document.getElementById('email');
  if (emailInput) {
    emailInput.addEventListener('blur', async function() {
      const email = this.value.trim();
      if (email) {
        const messageDiv = document.getElementById('formMessage');
        const exists = await checkEmailUniqueness(email);
        if (exists) {
          messageDiv.style.color = 'var(--danger)';
          messageDiv.textContent = '‚úó You have already signed up with this email.';
          messageDiv.style.display = 'block';
        } else {
          messageDiv.style.display = 'none';
        }
      }
    });
  }
});

async function submitForm(e) {
  e.preventDefault();
  
  // Check if form is disabled (at capacity)
  if (signupStatus.isFull) {
    const messageDiv = document.getElementById('formMessage');
    messageDiv.style.color = 'var(--danger)';
    messageDiv.textContent = '‚úó Sorry, we\'ve reached the limit of 30 founding beta signups.';
    messageDiv.style.display = 'block';
    return;
  }
  
  const emailValue = document.getElementById('email').value.trim();
  
  // Check email uniqueness before submitting
  const emailExists = await checkEmailUniqueness(emailValue);
  if (emailExists) {
    const messageDiv = document.getElementById('formMessage');
    messageDiv.style.color = 'var(--danger)';
    messageDiv.textContent = '‚úó You have already signed up with this email.';
    messageDiv.style.display = 'block';
    return;
  }
  
  const data = {
    email: emailValue,
    company: document.getElementById('company').value,
    role: document.getElementById('role').value,
    team_size: document.getElementById('teamSize').value,
    db_type: document.getElementById('dbType').value,
    slack_workspace_size: document.getElementById('slackSize').value || null,
    pricing_feedback: document.getElementById('pricingFeedback').value || null,
    notes: document.getElementById('notes').value || null
  };

  const messageDiv = document.getElementById('formMessage');
  const submitButton = e.target.querySelector('button[type="submit"]');
  submitButton.disabled = true;
  submitButton.textContent = 'Submitting...';
  messageDiv.style.display = 'none';

  try {
    const res = await fetch('/api/early-access', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    const result = await res.json();
    if(res.ok){
      messageDiv.style.color = 'var(--accent)';
      messageDiv.innerHTML = '‚úì Thanks! We\'ve sent a confirmation email and plan to send an invitation soon!<br><small style="font-size:0.9rem;">Please check your spam folder in case you don\'t see the email.</small>';
      messageDiv.style.display = 'block';
      e.target.reset();
      // Refresh signup status after successful submission
      await checkSignupStatus();
    } else {
      throw new Error(result.detail || 'Something went wrong');
    }
  } catch(err){
    messageDiv.style.color = 'var(--danger)';
    messageDiv.textContent = '‚úó ' + (err.message || 'Failed to submit. Please try again.');
    messageDiv.style.display = 'block';
  } finally {
    submitButton.disabled = false;
    submitButton.textContent = 'Submit Request';
  }
}
</script>

<script>
  window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
</script>
<script defer src="/_vercel/insights/script.js"></script>

</body>
</html>
